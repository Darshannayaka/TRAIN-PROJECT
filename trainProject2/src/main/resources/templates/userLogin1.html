<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<title>User Login</title>

<style>
  .password-wrapper{
    position: relative;
  }

  .passwordToggle{
    position: absolute;
    top: 50%;
    right: 5px;
    transform: translateY(-50%);
    cursor: pointer;
  }
</style>

<link rel="icon" href="img/train-icon.ico" type="image/x-icon">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
	crossorigin="anonymous"> 


   

<link rel="stylesheet" type="text/css" th:href="@{/CSS/userLogin.css}">
</head>
<body>
	<div class="text-center">
		<div class="contain">
			<div class="row">
				<div>
					<h1 th:align="center">TRAVELLING TRAIN</h1>
				</div>
			</div>
		</div>

		<div class="row justify-content-center"></div>

<table>
<tr>
	     <th width="8%" ><a th:href="@{/home}">Home Page</a></th>
	
		<th width="8%" ><a th:href="@{/aboutUs}">AboutUs</a></th>
		
		<th width="8%" ><a th:href="@{/contactUs}">ContactUs</a></th>

		<th width="8%" ><a th:href="@{/register}">UserRegistration</a></th>
  
		<th width="8%" ><a th:href="@{/loginPage}">Login</a></th>
		
		
</tr>
</table>

		<div class="row justify-content-center">
			<div class="container">

				<h3>Login Here</h3>

				<div>
					<form th:action="@{/login}" action="#" method="post"
						style="max-width: 600px; margin: 0 auto;" name="suForm" id="supform">
						<div class="m-2">

							<div th:if="${param.error}" class="alert alert-danger">
								Invalid username and password</div>

							<div th:if="${param.logout}" class="alert alert-success">
								You have been logged out</div>
							
						
							<div th:if="${param.change}" class="alert alert-success">
								<p th:text="${param.change}"></p>
							</div>
							
							
							<div class="form-group row">
								<label class="col-form-lable col-4">EmailID</label>
								<div class="col-6">
									<input type="email" class="form-control" name="username"
										required placeholder="Enter username" minlength="2"
										maxlength="64" id="email" onclick="resetBtn()"/>
								</div>
							</div>

							<div class="form-group row">
								<label class="col-form-lable col-4">Password</label>
								<div class="col-6">
									 <div class="password-wrapper">
                        <input type="password" placeholder="Password" id="passwordInput" class="form-control" required >
                        <span class="passwordToggle" onclick="togglepasswordvisibility(),resetBtn()" id="passwordToggle">show</span>
                      </div>
										
								</div>
							</div>

							<br>

							<div class="button">
								<input type="submit" id="submit-btn" value="Login" onmouseover="mouseOver()"/>
							</div>
							<p>
								<strong>Don't have an account?<a th:href="@{/register}">Register
										now</a></strong>
							</p>
							<p>
								<strong>Forgot Password Click here?<a
									th:href="@{/forgot}">Forgot password</a></strong>
							</p>
						</div>
					</form>
				</div>
			</div>

		</div>

	</div>
	<br>
   <script>
		
			var a = 0;
			
			function mouseOver() {
				
				const name = document.forms['suForm']['name'].value;
				const email = document.forms['suForm']['email'].value;
				const pass = document.forms['suForm']['passwordInput'].value;
				
				const tick = document.querySelector('#check');
				const emailCheck = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
				
				if((name == "" || !email.match(emailCheck) || pass == "" || tick.checked == false) && a == 0){
					buttonMoveLeft();
					a=1;
					return false;
				}
				
				if((name == "" || !email.match(emailCheck) || pass == "" || tick.checked == false) && a == 1){
					buttonMoveRight();
					a=2;
					return false;
				}
				
				if((name == "" || !email.match(emailCheck) || pass == "" || tick.checked == false) && a == 2){
					buttonMoveLeft();
					a=1;
					return false;
				}
				
				else{
					document.getElementById('submit-btn').style.cursor = 'pointer';
					return false;
					
				};
			};
		
		function buttonMoveLeft(){
			
			const button = document.getElementById('submit-btn');
			button.style.transform = 'translateX(-160%)';
			
		};
		
   		function buttonMoveRight(){
			
			const button = document.getElementById('submit-btn');
			button.style.transform = 'translateX(0%)';
			
		};
		
		function resetBtn(){
			
			const button = document.getElementById('submit-btn');
			button.style.transform = 'translateX(0%)';
			
		};
		</script>
		
		  <script>

    function togglepasswordvisibility() {
      var passwordInput = document.getElementById("passwordInput");
      var passwordToggle = document.getElementById("passwordToggle");

      if(passwordInput.type === "password"){
        passwordInput.type = "text";
        passwordToggle.textContent = "Hide";
      }else{
        passwordInput.type = "password";
        passwordToggle.textContent = "Show";
      }
    }
  </script>

</body>
</html>